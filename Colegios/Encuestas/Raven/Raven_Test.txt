<html>
<head>
<title> Raven Test</title>
<link rel="stylesheet" href="estilo.css">
<script src="myscript.js"></script>
</head>
<body>
	
<img src="A1.jpg" id="ph" alt="HTML5 Icon" width="0" height="0"> <!-- place holder for images to be shown -->
	
<div id="wrapper">
  <h1>Raven Test </h1>
  <p>Pontificia Universidad Javeriana</p>
  
<form action="ejemplo1.php" method="get">
  <p>Nombre: <input type="text"  name="nombre" size="40"></p>
  <p>Curso: 
    <input type="radio" name="curso" value= "4"> 4°
    <input type="radio" name="curso" value= "6"> 6°
  </p>
  <p>Edad: <input type="number" name="nacido" min="0"></p>
  <p>Sexo:
    <input type="radio" name="hm" value="h"> Hombre
    <input type="radio" name="hm" value="m"> Mujer
  </p>
    <p> En las siguientes preguntas indiqué la respuesta que considere. No hay respuesta correcta o incorrecta, conteste lo que sienta más cercano a usted  
 </p>
 <hr/>
 </form>
 
 </div>
 
 
 <form action="ejemplo1.php" method="get"> 
    <p id = 'op'>Opciones: 
      <input type="radio" name="opciones" value= "1"> 1
      <input type="radio" name="opciones" value= "2"> 2
	  <input type="radio" name="opciones" value= "3"> 3
	  <input type="radio" name="opciones" value= "4"> 4
	  <input type="radio" name="opciones" value= "5"> 5
	  <input type="radio" name="opciones" value= "6"> 6
    </p>
  </form>
  
  <button type="button" id= "button" onclick="myPictChange()">Empezar</button>
  
   

</body>
<script>
 var data = {
 	Nombre: [],
    Curso: [], 
 	Edad: [],
 	Genero: [], //0 hombre, 1 mujer
 	Resp: [],
	img_names: ['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8', 'A9', 'A10', 'A11', 'A12', 'B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B9', 'B10', 'B11', 'B12', 'C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8', 'C9', 'C10', 'C11', 'C12', 'D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7', 'D8', 'D9', 'D10', 'D11', 'D12', 'E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8', 'E9', 'E10', 'E11', 'E12'],
	img_used_bilker: [10, 23, 27, 35, 42, 47, 48, 52, 54], //indices in img_names //Table 2 (9 items) of Bilker et al, Development of Abbreviated Nine-Item Forms of the Raven’s Standard Progressive Matrices Test
	 img_used_wytek:  [0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,18,19,21,22,24,34,35,36,41,46,53,54,57,58,59], //Table 1 of Wytek et al, Development of a new shortened version of raven's matrices test for application and rough assessment of present intelectual capacity within Psychopathological Investigation
	  
 }
 

 
 var idx = 0

 function myPictChange() {
	 var check = 0
	 var idx2 = img_used_bilker[idx]
	 //var idx2 = img_used_wytek[idx]
	 if (idx2 > 23){
		 var radioB = document.createElement("input");
		 radioB.setAttribute("type","radio");
		 radioB.setAttribute("name","opciones");
		 radioB.setAttribute("value","7");
		 radioB.setAttribute("innerHTML","7");
		 document.getElementById("op").appendChild(radioB);	
		 
		 
		 radioB = document.createElement("input");
		 radioB.setAttribute("type","radio");
		 radioB.setAttribute("name","opciones");
		 radioB.setAttribute("value","8");
		 radioB.setAttribute("innerHTML","8");
		 document.getElementById("op").appendChild(radioB);	
		 
	 }
	 
	 var choices = document.getElementsByName('opciones');
	 for (j=0; j<choices.length; j++){
		if (choices[j].checked && idx<999) {
			data.Resp.push(j)
			check = 1
		} 
	 }
	 
	 if (check == 1) {
		 if (idx == 0){
  		   data.Nombre = document.getElementsByName("nombre")[0].value
  		   data.Edad = document.getElementsByName("nacido")[0].value
		   var choices = document.getElementsByName("hm");
		   for (j=0; j<choices.length; j++){
		   if (choices[j].checked) {
		   		data.Genero=j
		   	}
		   }
		   var choices= document.getElementsByName("curso");
		   for (j=0; j<choices.length; j++){
		         if (choices[j].checked) {
					 if(j==0){
					 	data.Curso=4
					 } else {
					 	data.Curso=6
					 }
		        }
		   }
		   
		 	document.getElementById("button").innerHTML = 'Siguiente'
		 } 
		 
		 document.getElementById("ph").src = img_names[idx2] + '.jpg';	 
		 idx = idx + 1
		 
		 if (idx > img_used_bilker.length){
			 idx = 999
			 if (data.Nombre.length == 0 || data.Curso.length == 0 || data.Edad.length == 0){
			 	alert("Llena tus datos y da click en siguiente de nuevo")
			 } 			 
		 	 saveText(JSON.stringify(data), data.Nombre + "_Raven.json")
			 alert("Terminaste, llama al instructor")
		 }
		 
	 } else {
	 	alert("No respondiste")
	 }
	 
	 
	 
 }
 

 
